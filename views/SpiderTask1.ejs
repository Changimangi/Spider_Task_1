<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="SpiderTask1.css">
    <title>Spider Task 1</title>
</head>
<body>
    <h2>Fortunate Humanae</h2>
    <h3>player1's turn</h3>
    <div id="overall">
        <div id="slno">
            <p></p>
            <p>1</p>
            <p>2</p>
            <p>3</p>
            <p>4</p>
            <p>5</p>
        </div>
        <div id="player1boxes">
            <p id="name1"><%=name1%></p>
            <div class="player1">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player1">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player1">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player1">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player1">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            
        </div>
        <div id="player2boxes">
            <p id="name2"><%=name2%></p>
            <div class="player2">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player2">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player2">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player2">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
            <div class="player2">
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
                <div class="part"></div>
            </div>
        </div>
        <div id="number"></div>
        <div id="loadbullet"></div>
        <button id="readytoshoot" onclick="shoot()">Shoot!!</button>
        <button id="generatenum" name="generatenum" onclick="begin()">Generate number</button>
        <div id="winner"></div>
    
    </div>

    <script>
        var randomnumber;
        var randomnumberforshooting;
        var turn = 0; 
        var player1human = [0,0,0,0,0];
        var player2human = [0,0,0,0,0];
        var player1shot = [0,0,0,0,0];
        var player2shot = [0,0,0,0,0];
        var player1shaded = [];
        var player2shaded = [];
        var playing;
        var bulletshoot = new Audio;
        bulletshoot.src = "shootingsound.mp3";
        var loadingsound = new Audio;
        loadingsound.src = "loadingsound.mp3";

        function begin(){
            if(turn%2==0){
                playing = "player1";
                console.log(document.getElementById("readytoshoot").style.display);
            }
            else{
                playing = "player2"
            }
            randomnumber = 1+ Math.floor(Math.random()*5);
            document.getElementById("number").innerHTML = randomnumber;
            playerdisplay(playing,randomnumber);
            if(playing == "player1" && (document.getElementById("readytoshoot").style.display=="none" || document.getElementById("readytoshoot").style.display=="" || document.getElementById("readytoshoot").style.display==" ")){
                document.getElementsByTagName("h3")[0].innerHTML = "Player2's turn";
            }
            if(playing == "player2" && (document.getElementById("readytoshoot").style.display=="none" || document.getElementById("readytoshoot").style.display=="" || document.getElementById("readytoshoot").style.display==" ")){
                document.getElementsByTagName("h3")[0].innerHTML = "Player1's turn";
            }
            checkwinner();
            turn++;
        }
        function disp(){
                    var x = 0;
                    var y = 0;
                    setInterval(repete,1);
                    function repete(){
                        
                        if(x<=20){
                            x++;
                            document.getElementById("winner").style.width = x+"vw";
                        }
                        if(y<=40){
                            y++;
                            document.getElementById("winner").style.height = y+"vh";
                        }
                        if(x>20 && y>40){
                            clearInterval(repete);
                        }

                    }
                }
        function playerdisplay(x,n){
            if(x=="player1"){
                if(player1human[n-1]!=15 ){
                document.getElementsByClassName("part")[((n-1)*15)+player1human[n-1]].style.opacity = "1";
                player1human[n-1]+=1;}
                if(player1human[n-1] == 15 && player1shot[n-1]==0){
                    player1shot[n-1] = 1;
                    player1shaded.push(n);
                    document.getElementsByClassName("player1")[n-1].style.backgroundImage = "url('fire.jpg')";
                    document.getElementById("readytoshoot").style.display = "block";
                document.getElementById("loadbullet").innerHTML = "Bullet loaded";
                loadingsound.play();
                }
            
            }
            if(x=="player2"){
            if(player2human[n-1]!=15){
                document.getElementsByClassName("part")[75+((n-1)*15)+player2human[n-1]].style.opacity = "1";
                player2human[n-1]+=1;}
            if(player2human[n-1]==15 && player2shot[n-1]==0){
                player2shot[n-1] = 1;
                player2shaded.push(n);
                document.getElementsByClassName("player2")[n-1].style.backgroundImage = "url('fire.jpg')";
                document.getElementById("readytoshoot").style.display = "block";
                document.getElementById("loadbullet").innerHTML = "Bullet loaded";
                loadingsound.play();

            }
            }
        }

        function checkwinner(){
            var flag1 = 0; 
            var flag2 = 0;
            for(let i = 0; i<5; i++){
                if(player1shot[i]!=1){
                    flag1 = 1;
                }
            }
            for(let i = 0; i<5; i++){
                if(player2shot[i]!=1){
                    flag2 = 1;
                }
            }
            if(flag1 == 0){
                document.getElementById("player1boxes").style.opacity = "0.5";
                document.getElementById("player2boxes").style.opacity = "0.5";
                document.getElementsByTagName("h3")[0].style.opacity = "0.5";
                document.getElementById("generatenum").style.opacity = "0.5";
                document.getElementById("winner").style.display = "block";
                document.getElementById("winner").innerHTML = document.getElementById("name1").innerHTML+" takes the game";
                disp();
                
            }
            if(flag2 == 0){
                document.getElementById("player1boxes").style.opacity = "0.5";
                document.getElementById("player2boxes").style.opacity = "0.5";
                document.getElementsByTagName("h3")[0].style.opacity = "0.5";
                document.getElementById("generatenum").style.opacity = "0.5";
                document.getElementById("winner").style.display = "block";
                document.getElementById("winner").innerHTML = document.getElementById("name2").innerHTML+" takes the game";
                disp();
            }

        }

        function shoot(){
            var randombox = 1+Math.floor(Math.random()*5);
            
            var newgen ;
            bulletshoot.play();
            if(playing == "player1"){
                while(player2shaded.includes(randombox)){
                    randombox = 1+Math.floor(Math.random()*5);
                }
                newgen = player2human[randombox-1];
                player2human[randombox-1] = 0;
                for(let i =0; i<newgen; i++){
                    document.getElementsByClassName("part")[(75+(randombox-1)*15+i)].style.opacity = 0;
                }
                document.getElementsByClassName("player2")[randombox-1].style.backgroundImage = "url('explode.jpg')";
                setTimeout(function(){
                    document.getElementsByClassName("player2")[randombox-1].style.backgroundImage = "url('water.jpg')";
                },3000);
                document.getElementById("readytoshoot").style.display = "none";
                document.getElementById("loadbullet").innerHTML = " "; 
                document.getElementsByTagName("h3")[0].innerHTML = "Player2's turn";
            }
            else if(playing == "player2"){
                while(player1shaded.includes(randombox)){
                    randombox = 1+Math.floor(Math.random()*5);
                }
                newgen = player1human[randombox-1];
                player1human[randombox-1] = 0;
                for(let i =0; i<newgen; i++){
                    document.getElementsByClassName("part")[((randombox-1)*15+i)].style.opacity = 0;
                }
                document.getElementsByClassName("player1")[randombox-1].style.backgroundImage = "url('explode.jpg')";
                setTimeout(function(){
                    document.getElementsByClassName("player1")[randombox-1].style.backgroundImage = "url('water.jpg')";
                },3000);
                document.getElementById("readytoshoot").style.display = "none";
                document.getElementById("loadbullet").innerHTML = " "; 
                document.getElementsByTagName("h3")[0].innerHTML = "Player1's turn";
            }
        }
        



    </script>
    

    
</body>
</html>